(this["webpackJsonpprobook-client"]=this["webpackJsonpprobook-client"]||[]).push([[0],{189:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(42),i=n.n(s),o=n(22),l=n.n(o),d=n(110),j=n(259),u=(n(189),n(12)),x=n(244),b=n(36),p=n(3),h=n(34),f=n(253),O=n(268),g=n(269),m=n(17),v=n(19),w=n(8),y=n.n(w),S=n(16),k=n(25),I=Object(k.b)("auth/loginUser",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/auth/login",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=Object(k.b)("auth/registerUser",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/auth/register",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(k.b)("auth/getProfile",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/profile/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=Object(k.b)("auth/getUsers",Object(S.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/auth/users/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),R=Object(k.c)({name:"auth",initialState:{status:"idle",isLoggedIn:!1,user:{},profile:{},userStatus:"idle",users:[]},reducers:{setAuth:function(e,t){e.isLoggedIn=t.payload.isLoggedIn},logout:function(e,t){localStorage.clear(),e.isLoggedIn=!1,l.a.defaults.headers.common.authorization=null},setUser:function(e,t){e.user=t.payload}},extraReducers:(r={},Object(p.a)(r,I.pending,(function(e,t){e.status="loading"})),Object(p.a)(r,I.fulfilled,(function(e,t){var n=t.payload.response,r=n.token,a=n.name,c=n.email,s=n._id;localStorage.setItem("login",JSON.stringify({token:r,email:c,_id:s,name:a,isLoggedIn:!0})),e.user.name=a,e.user.email=c,e.user._id=s,e.status="success",e.isLoggedIn=!0})),Object(p.a)(r,I.rejected,(function(e,t){e.status="failed",e.isLoggedIn=!1})),Object(p.a)(r,C.pending,(function(e,t){e.status="loading"})),Object(p.a)(r,C.fulfilled,(function(e,t){e.status="success";var n=t.payload.response,r=n.token,a=n.name,c=n.email;localStorage.setItem("login",JSON.stringify({token:r,name:a,email:c,isLoggedIn:!0})),e.user.name=a,e.user.email=c,e.isLoggedIn=!0})),Object(p.a)(r,C.rejected,(function(e,t){e.status="failed",e.isLoggedIn=!1})),Object(p.a)(r,z.pending,(function(e,t){e.status="loading"})),Object(p.a)(r,z.fulfilled,(function(e,t){e.status="success",e.profile=t.payload.profile})),Object(p.a)(r,z.rejected,(function(e,t){e.status="failed"})),Object(p.a)(r,_.pending,(function(e,t){e.userStatus="loading"})),Object(p.a)(r,_.fulfilled,(function(e,t){e.userStatus="success",e.users=t.payload.response.users})),Object(p.a)(r,_.rejected,(function(e,t){e.userStatus="failed"})),r)}),D=R.reducer,L=R.actions,E=L.setAuth,A=L.logout,T=n(0);function P(){var e=Object(a.useState)({email:"",password:""}),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(m.b)(),s=Object(v.g)(),i=Object(m.c)((function(e){return e.auth})),o=i.status,l=i.isLoggedIn;return Object(a.useEffect)((function(){l&&s.push("/")}),[l,s]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(I(n))},children:[Object(T.jsx)(f.a,{onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter Email",type:"email",required:!0,name:"email"}),Object(T.jsx)(f.a,{sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter Password",type:"password",required:!0,onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},name:"password"}),Object(T.jsx)(O.a,{disabled:0===n.email.trimStart().length||0===n.password.trimStart().length,sx:{width:"100%",margin:"1.5rem 0",padding:"12px 0",borderRadius:"28px"},variant:"contained",color:"primary",type:"submit",children:"loading"===o?Object(T.jsx)(g.a,{size:24,sx:{color:"#FFF"}}):"Login"})]}),Object(T.jsx)(O.a,{onClick:function(){r({email:"tomato@mail.com",password:"tomato"}),c(I({email:"tomato@mail.com",password:"tomato"}))},sx:{width:"100%",margin:".5rem 0 1rem 0.5rem",padding:"12px 0",borderRadius:"28px"},variant:"outlined",color:"primary",children:"loading"===o?"Logging in...":"Login as guest"})]})}function W(){var e=Object(a.useState)({name:"",handle:"",email:"",password:""}),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(m.b)(),s=Object(v.g)(),i=Object(m.c)((function(e){return e.auth})),o=i.status,l=i.isLoggedIn;return Object(a.useEffect)((function(){l&&s.push("/")}),[l,s]),Object(T.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(C(n))},children:[Object(T.jsx)(f.a,{onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},name:"name",sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter full name",type:"text",required:!0}),Object(T.jsx)(f.a,{name:"handle",onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Choose an handle",type:"text",required:!0}),Object(T.jsx)(f.a,{name:"email",onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter Email",type:"email",required:!0}),Object(T.jsx)(f.a,{name:"password",onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter Password",type:"password",required:!0}),Object(T.jsx)(O.a,{disabled:0===n.email.trimStart().length||0===n.password.trimStart().length||0===n.handle.trimStart().length||0===n.name.trimStart().length,type:"submit",sx:{width:"100%",margin:"1.5rem 0",padding:"12px 0",borderRadius:"28px"},variant:"contained",color:"primary",children:"loading"===o?Object(T.jsx)(g.a,{size:24,sx:{color:"#FFF"}}):"Register"})]})}var F=n(264),U=n(92);function B(){var e=Object(a.useState)(!0),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(b.a)();return Object(T.jsx)(x.a,{display:"flex",justifyContent:"center",alignItems:"center",sx:{width:"100vw",height:"100vh"},children:Object(T.jsxs)(x.a,{borderRadius:c.shape.borderRadius,sx:{width:c.breakpoints.values.sm,bgcolor:"#EFF3F4",padding:" 3rem 2rem"},children:[Object(T.jsx)(x.a,{textAlign:"center",marginBottom:"1rem",children:Object(T.jsx)("img",{src:"/logo.png",alt:"Logo"})}),n?Object(T.jsx)(U.a,{variant:"h5",children:"Login to your account"}):Object(T.jsx)(U.a,{variant:"h5",children:"Create a new account"}),n?Object(T.jsx)(P,{}):Object(T.jsx)(W,{}),n?Object(T.jsxs)(x.a,{textAlign:"center",margin:".5rem 0",children:["Don't have an account?"," ",Object(T.jsx)(F.a,{style:{textDecoration:"none",cursor:"pointer"},onClick:function(){return r(!1)},children:"Create one"})]}):Object(T.jsxs)(x.a,{textAlign:"center",margin:".5rem 0",children:["Already registered?"," ",Object(T.jsx)(F.a,{style:{textDecoration:"none",cursor:"pointer"},onClick:function(){return r(!0)},children:"Sign in"})]})]})})}var M,J=n(263),N=n(257),G=n(247),H=n(248),Y=n(137),q=n.n(Y),X=n(240),K=n(256),Q=n(272),V=n(261),Z=n(266),$=n(73),ee=n.n($),te=n(51),ne=n.n(te),re=n(138),ae=n.n(re),ce=n(139),se=n.n(ce),ie=n(24),oe=n(270),le=n(274),de=n(273),je=n(271),ue=n(135),xe=n.n(ue),be=n(60),pe=n(246);function he(e){var t=e.children,n=e.open,r=e.handleClose,a=e.handleSave,c=e.saveText,s=e.len,i=Object(be.a)();return Object(T.jsxs)(oe.a,{open:n,onClose:r,fullWidth:!0,maxWidth:"sm",children:[Object(T.jsx)(je.a,{children:Object(T.jsx)(pe.a,{textAlign:"right",borderBottom:"1px solid #ccc",children:Object(T.jsx)(Q.a,{onClick:r,children:Object(T.jsx)(xe.a,{})})})}),Object(T.jsx)(de.a,{children:t}),Object(T.jsx)(le.a,{children:Object(T.jsx)(O.a,{disabled:0===s,variant:"contained",color:"primary",size:"small",sx:{borderRadius:i.shape.borderRadius,fontSize:"12px"},onClick:function(){a(),r()},children:c})})]})}function fe(e){return new Promise((function(t){return setTimeout(t,e)}))}var Oe=Object(k.b)("post/getPosts",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(3e3);case 2:return e.next=4,l.a.get("/api/posts/"+t);case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ge=Object(k.b)("post/getPostDetails",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/posts/post/"+t);case 2:return n=e.sent,r=n.data,console.log(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),me=Object(k.b)("post/getComments",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/comments/"+t);case 2:return n=e.sent,r=n.data,console.log(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ve=Object(k.c)({name:"post",initialState:{status:"idle",posts:[],postDetails:{},commentStatus:"idle",comments:[]},reducers:{updateLike:function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.payload.id}));e.posts[n].isLiked=!e.posts[n].isLiked}},extraReducers:(M={},Object(p.a)(M,Oe.pending,(function(e,t){e.status="loading"})),Object(p.a)(M,Oe.fulfilled,(function(e,t){e.status="success";var n={},r={};e.posts.map((function(e){return n[e._id]=e})),t.payload.response.posts.map((function(e){return r[e._id]=e})),e.posts=Object.values(Object.assign(n,r))})),Object(p.a)(M,Oe.rejected,(function(e,t){e.status="failed"})),Object(p.a)(M,ge.pending,(function(e,t){e.status="loading"})),Object(p.a)(M,ge.fulfilled,(function(e,t){e.status="success",e.postDetails=t.payload.response.post})),Object(p.a)(M,ge.rejected,(function(e,t){e.status="failed"})),Object(p.a)(M,me.pending,(function(e,t){e.commentStatus="loading"})),Object(p.a)(M,me.fulfilled,(function(e,t){e.commentStatus="success",e.comments=t.payload.response.comments})),Object(p.a)(M,me.rejected,(function(e,t){e.commentStatus="failed"})),M)}),we=ve.reducer,ye=ve.actions.updateLike,Se=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/posts",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/comments/"+t.id,t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/posts/likes",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.delete("/api/posts/".concat(t.id));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/followers",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/followings",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.delete("/api/followers/"+t.id+"?userId="+t.userId);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.delete("/api/followings?followingId="+t.id+"&userId="+t.userId);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/message/send/",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ee=n(249);function Ae(){Object(b.a)();var e=Object(m.b)(),t=JSON.parse(localStorage.getItem("login"))._id,n=a.useState(!1),r=Object(u.a)(n,2),c=r[0],s=r[1],i=a.useState(!1),o=Object(u.a)(i,2),l=o[0],d=o[1],j=a.useState(""),p=Object(u.a)(j,2),h=p[0],f=p[1],g=a.useState(""),v=Object(u.a)(g,2),w=v[0],k=v[1],I=function(){s(!0)},C=a.useState(""),z=Object(u.a)(C,2),_=z[0],R=z[1],D=function(){var t=Object(S.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se({text:_,imageUrl:w});case 2:t.sent&&(e(Oe()),R(""));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(x.a,{sx:{height:"100vh",maxWidth:"100%"},children:[Object(T.jsx)(x.a,{textAlign:"center",children:Object(T.jsx)(ie.b,{to:"/",style:{textDecoration:"none",color:"inherit",backgroundColor:"inherit"},children:Object(T.jsx)("img",{src:"/logo.png",alt:"logo",width:"70px"})})}),Object(T.jsxs)(J.a,{children:[Object(T.jsx)(ie.c,{to:"/",style:{textDecoration:"none",color:"inherit",backgroundColor:"inherit"},children:Object(T.jsxs)(N.a,{button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},children:[Object(T.jsx)(G.a,{children:Object(T.jsx)(q.a,{fontSize:"medium",style:{color:"white"}})}),Object(T.jsx)(K.a,{lgDown:!0,children:Object(T.jsx)(H.a,{primaryTypographyProps:{fontSize:"18px",color:"white"},primary:"Home"})})]})}),Object(T.jsx)(ie.c,{to:"/messages",style:{textDecoration:"none",color:"inherit",backgroundColor:"inherit"},children:Object(T.jsxs)(N.a,{button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},children:[Object(T.jsx)(G.a,{children:Object(T.jsx)(ne.a,{fontSize:"medium",style:{color:"white"}})}),Object(T.jsx)(K.a,{lgDown:!0,children:Object(T.jsx)(H.a,{primaryTypographyProps:{fontSize:"18px",color:"white"},primary:"Messages"})})]})}),Object(T.jsxs)(N.a,{button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},children:[Object(T.jsx)(G.a,{children:Object(T.jsx)(Ee.a,{fontSize:"medium",style:{color:"white"}})}),Object(T.jsx)(K.a,{lgDown:!0,children:Object(T.jsx)(H.a,{primaryTypographyProps:{fontSize:"18px",color:"white"},primary:"Jobs"})})]}),Object(T.jsx)(ie.c,{to:"/profile/".concat(t),style:{textDecoration:"none",color:"inherit",backgroundColor:"inherit"},children:Object(T.jsxs)(N.a,{button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},children:[Object(T.jsx)(G.a,{children:Object(T.jsx)(ee.a,{fontSize:"medium",style:{color:"white"}})}),Object(T.jsx)(K.a,{lgDown:!0,children:Object(T.jsx)(H.a,{primaryTypographyProps:{fontSize:"18px",color:"white"},primary:"Profile"})})]})}),Object(T.jsxs)(N.a,{id:"basic-button",button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},onClick:function(){e(A())},children:[Object(T.jsx)(G.a,{children:Object(T.jsx)(ae.a,{fontSize:"medium",style:{color:"white"}})}),Object(T.jsx)(K.a,{lgDown:!0,children:Object(T.jsx)(H.a,{primaryTypographyProps:{fontSize:"18px",color:"white"},primary:"Logout"})})]})]}),Object(T.jsx)(K.a,{lgDown:!0,children:Object(T.jsx)(O.a,{onClick:I,variant:"contained",color:"success",style:{borderRadius:"8px",textTransform:"capitalize",width:"90%"},children:"Post"})}),Object(T.jsx)(K.a,{lgUp:!0,children:Object(T.jsx)(Q.a,{onClick:I,variant:"contained",color:"primary",style:{borderRadius:"28px",padding:"0 15px",textTransform:"capitalize",textAlign:"center"},children:Object(T.jsx)(se.a,{})})})]}),c&&Object(T.jsx)(he,{open:c,handleClose:function(){s(!1),f(""),d(!1)},saveText:"Post",len:_.trimStart().length,handleSave:D,children:Object(T.jsx)(x.a,{children:Object(T.jsxs)(V.a,{container:!0,children:[Object(T.jsx)(V.a,{item:!0,xs:12,flexGrow:"1",children:Object(T.jsx)(x.a,{padding:".5rem 0",children:Object(T.jsx)(X.a,{value:_,onChange:function(e){return R(e.target.value)},multiline:!0,rows:"2",disableUnderline:!0,type:"text",placeholder:"What is your post about....",style:{width:"100%",height:"20vh",outline:"none",border:"none"}})})}),""===w?Object(T.jsxs)(V.a,{item:!0,xs:12,children:[!l&&Object(T.jsx)(O.a,{onClick:function(){return d(!0)},children:"+ Add Image"}),l&&Object(T.jsxs)(T.Fragment,{children:[" ",Object(T.jsx)(Z.a,{type:"file",onChange:function(e){return f(e.target.files[0])}}),Object(T.jsx)(O.a,{onClick:function(){var e=new FormData;e.append("file",h),e.append("upload_preset","upload"),e.append("cloud_name","dxotafsfa"),fetch("  https://api.cloudinary.com/v1_1/dxotafsfa/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){console.log(e),k(e.url)})).catch((function(e){return console.log(e)}))},children:"Upload"})," "]})]}):Object(T.jsxs)(V.a,{item:!0,xs:12,children:[" ",Object(T.jsx)("img",{style:{maxHeight:"100%",maxWidth:"100%"},src:w,alt:"ss"})," "]})]})})})]})}var Te,Pe=n(250),We=Object(k.b)("follow/getFollowings",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/followings/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fe=Object(k.b)("follow/getFollowers",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/followers/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ue=Object(k.c)({name:"follow",initialState:{followingStatus:"idle",followings:[],followerStatus:"idle",followers:[]},reducers:{},extraReducers:(Te={},Object(p.a)(Te,We.pending,(function(e,t){e.followingStatus="loading"})),Object(p.a)(Te,We.fulfilled,(function(e,t){e.followingStatus="success",e.followings=t.payload.response.followings})),Object(p.a)(Te,We.rejected,(function(e,t){e.followingStatus="failed"})),Object(p.a)(Te,Fe.pending,(function(e,t){e.followerStatus="loading"})),Object(p.a)(Te,Fe.fulfilled,(function(e,t){e.followerStatus="success",e.followers=t.payload.response.followers})),Object(p.a)(Te,Fe.rejected,(function(e,t){e.followerStatus="failed"})),Te)}).reducer;function Be(e){var t=e.user,n=Object(b.a)(),r=JSON.parse(localStorage.getItem("login"))._id,a=Object(m.b)(),c=function(){var e=Object(S.a)(y.a.mark((function e(){var n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze({userId:t._id,followerId:r});case 2:return n=e.sent,e.next=5,_e({followingId:t._id,userId:r});case 5:c=e.sent,n&&a(Fe(r)),c&&a(We(r));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)(pe.a,{margin:"1rem 0",children:Object(T.jsxs)(V.a,{container:!0,alignItems:"center",justifyContent:"space-between",children:[Object(T.jsx)(V.a,{item:!0,children:Object(T.jsxs)(V.a,{container:!0,children:[Object(T.jsx)(ie.b,{to:"/profile/".concat(t._id),children:Object(T.jsx)(V.a,{item:!0,sx:{paddingRight:"12px"},children:Object(T.jsx)("img",{src:"/logo.png",width:"50px",alt:"logo"})})}),Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)(V.a,{container:!0,alignItems:"center",children:Object(T.jsxs)(V.a,{item:!0,children:[Object(T.jsx)(U.a,{sx:{fontSize:"16px",fontWeight:"500"},children:t.name}),Object(T.jsx)(pe.a,{display:"flex",alignItems:"center",children:Object(T.jsx)(U.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:t.handle})})]})})})]})}),Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)(O.a,{onClick:c,size:"small",sx:{borderRadius:n.shape.borderRadius,textTransform:"capitalize",ml:"12px",background:"black","&:hover":{background:"#333"}},variant:"contained",children:"Follow"})})]})})}var Me=n(251);function Je(){var e=c.a.useState(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=JSON.parse(localStorage.getItem("login"))._id,i=Object(m.b)(),o=Object(m.c)((function(e){return e.auth})),l=o.users,d=o.userStatus,j=Object(m.c)((function(e){return e.follow})),x=j.followingStatus,b=j.followings;function p(){return l.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())||e.handle.toLowerCase().includes(n.toLowerCase())}))}return Object(a.useEffect)((function(){i(We(s))}),[i,s]),Object(T.jsx)(pe.a,{sx:{height:"100%"},children:Object(T.jsxs)(pe.a,{paddingTop:"10px",children:[Object(T.jsxs)(pe.a,{width:"100%",borderRadius:"28px",border:"1px solid #eee",position:"relative",sx:{background:"#eee"},children:[Object(T.jsx)(Z.a,{value:n,onChange:function(e){return r(e.target.value)},type:"text",inputProps:{style:{padding:"10px"}},disableUnderline:!0,fullWidth:!0,placeholder:"Search",startAdornment:Object(T.jsx)(Pe.a,{sx:{paddingLeft:"20px",color:"#777"}})}),0!==n.length&&Object(T.jsxs)(pe.a,{width:"100%",sx:{backgroundColor:"white",border:"1px solid #eee",borderRadius:"28px",padding:"1rem 0",zIndex:"999",maxHeight:"50vh",overflowY:"scroll"},position:"absolute",children:[0!==n.length&&0===p().length&&Object(T.jsx)(U.a,{sx:{padding:"0 1rem"},children:"No users found!"}),p().map((function(e){return Object(T.jsx)(pe.a,{children:Object(T.jsx)(ie.b,{onClick:function(){return r("")},style:{textDecoration:"none"},to:"/profile/".concat(e._id),children:Object(T.jsxs)(V.a,{sx:{overflow:"hidden",padding:".2rem 1rem","&:hover":{backgroundColor:"#eee"}},container:!0,alignItems:"center",children:[Object(T.jsx)(V.a,{item:!0,sx:{paddingRight:"12px"},children:Object(T.jsx)("img",{src:"/logo.png",width:"50px",alt:"logo"})}),Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)(V.a,{container:!0,alignItems:"center",children:Object(T.jsxs)(V.a,{item:!0,children:[Object(T.jsx)(U.a,{sx:{fontSize:"16px",fontWeight:"500",color:"#000"},children:e.name}),Object(T.jsx)(pe.a,{display:"flex",alignItems:"center",children:Object(T.jsx)(U.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:e.handle})})]})})})]})})},e._id)}))]})]}),Object(T.jsxs)(pe.a,{sx:{background:"#eee",borderRadius:"28px",padding:"10px 20px",margin:"1rem 0"},children:[Object(T.jsxs)(U.a,{variant:"h6",sx:{fontWeight:"bold"},children:["Huddle ",Object(T.jsx)(Me.a,{})]}),Object(T.jsx)(pe.a,{textAlign:"center",marginTop:"1rem",children:("loading"===d||"loading"===x)&&Object(T.jsx)(g.a,{size:20,color:"primary"})}),"success"===d&&l.filter((function(e){return e._id!==s})).filter((function(e){return-1===b.findIndex((function(t){return t.followingId===e._id}))})).slice(0,7).map((function(e){return Object(T.jsx)(Be,{user:e},e._id)}))]})]})})}function Ne(e){var t=e.children,n=Object(be.a)(),r=Object(m.b)();return Object(a.useEffect)((function(){r(_())}),[r]),Object(T.jsx)(x.a,{sx:{maxWidth:n.breakpoints.values.lg,margin:"0 auto"},children:Object(T.jsxs)(V.a,{container:!0,children:[Object(T.jsx)(V.a,{item:!0,xs:1,lg:2,children:Object(T.jsx)(Ae,{})}),Object(T.jsx)(V.a,{item:!0,xs:11,lg:10,children:Object(T.jsxs)(V.a,{container:!0,children:[Object(T.jsx)(V.a,{item:!0,xs:12,lg:8,style:{backgroundColor:"white"},children:Object(T.jsx)(x.a,{sx:{height:"100vh",margin:"0 1rem",borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc"},children:t})}),Object(T.jsx)(K.a,{lgDown:!0,children:Object(T.jsx)(V.a,{item:!0,lg:4,sx:{height:"100vh"},children:Object(T.jsx)(Je,{})})})]})})]})})}var Ge=n(88),He=n.n(Ge),Ye=n(54),qe=n.n(Ye),Xe=n(140),Ke=n.n(Xe),Qe=n(252),Ve=n(141),Ze=n.n(Ve),$e=n(142),et=n.n($e),tt=n(143),nt=n.n(tt),rt=n(147),at=n(262),ct=n(55),st=n(85),it=n.n(st),ot=n(86),lt=n.n(ot),dt=n(70),jt=n.n(dt),ut=n(87),xt=n.n(ut);function bt(e){var t=e.post,n=e.profile,r=Object(m.b)(),s=Object(a.useState)(""),i=Object(u.a)(s,2),o=i[0],l=i[1],d=c.a.useState(null),j=Object(u.a)(d,2),x=j[0],b=j[1],p=Boolean(x),h=JSON.parse(localStorage.getItem("login"))._id,f=function(){var e=Object(S.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r(ye({id:t._id})),e.next=4,Ie({id:t._id});case 4:"Post updated successfully."!==e.sent.message&&r(ye({id:t._id}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(S.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke({id:t._id,text:o});case 2:e.sent&&l("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(S.a)(y.a.mark((function e(a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.stopPropagation(),window.confirm("Are you sure to delete this post?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Ce({id:t._id});case 6:e.sent&&r(n?z(t.author._id):Oe());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=c.a.useState(!1),w=Object(u.a)(v,2),k=w[0],I=w[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ie.b,{to:"/posts/".concat(t._id),style:{textDecoration:"none",color:"inherit"},children:Object(T.jsxs)(pe.a,{padding:"1rem",sx:{"&:hover":{backgroundColor:"#eee"}},children:[Object(T.jsx)("img",{src:t.imageUrl,alt:"ff",style:{maxHeight:"100%",maxWidth:"100%"}}),Object(T.jsxs)(V.a,{container:!0,flexWrap:"nowrap",children:[Object(T.jsx)(V.a,{item:!0,sx:{paddingRight:"1rem"},children:Object(T.jsx)(ie.b,{to:"/profile/".concat(t.author._id),children:Object(T.jsx)("img",{src:"/logo.png",alt:"lgoog",width:"50px"})})}),Object(T.jsx)(V.a,{item:!0,flexGrow:"1",children:Object(T.jsxs)(pe.a,{children:[Object(T.jsxs)(V.a,{container:!0,justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",children:[Object(T.jsxs)(V.a,{item:!0,children:[Object(T.jsxs)(pe.a,{display:"flex",children:[Object(T.jsx)(U.a,{sx:{fontSize:"16px",fontWeight:500,mr:"6px"},children:t.author.name}),Object(T.jsxs)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:["@",t.author.handle]}),Object(T.jsx)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:"."}),Object(T.jsx)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:Object(ct.a)(new Date(t.createdAt))})]}),Object(T.jsx)(pe.a,{children:Object(T.jsx)(U.a,{sx:{fontSize:"15px",color:"#555"},children:t.text})})]}),Object(T.jsxs)(V.a,{item:!0,children:[t.author._id===h&&Object(T.jsx)(Q.a,{"aria-expanded":p?"true":void 0,onClick:function(e){e.preventDefault(),b(e.currentTarget)},children:Object(T.jsx)(qe.a,{})}),Object(T.jsx)(rt.a,{id:"basic-menu",anchorEl:x,open:p,onClose:function(){b(null)},onClick:function(e){return e.stopPropagation()},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(T.jsx)(at.a,{onClick:function(e){return g(e)},children:"Delete Post"})})]})]}),Object(T.jsxs)(pe.a,{display:"flex",justifyContent:"space-between",marginRight:"5rem",marginTop:".8rem",children:[Object(T.jsx)(Q.a,{onClick:function(e){e.preventDefault(),I(!0)},size:"small",children:Object(T.jsx)(ne.a,{fontSize:"small"})}),Object(T.jsx)(Q.a,{size:"small",children:Object(T.jsx)(it.a,{fontSize:"small"})}),Object(T.jsx)(Q.a,{onClick:f,size:"small",children:t.isLiked?Object(T.jsx)(jt.a,{fontSize:"small"}):Object(T.jsx)(lt.a,{fontSize:"small"})}),Object(T.jsx)(Q.a,{size:"small",children:Object(T.jsx)(xt.a,{fontSize:"small"})})]})]})})]})]})}),k&&Object(T.jsx)(he,{open:k,handleClose:function(){I(!1)},saveText:"Comment",len:o.trimStart().length,handleSave:O,children:Object(T.jsx)(pe.a,{children:Object(T.jsxs)(V.a,{container:!0,children:[Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)("img",{src:"/logo.png",alt:"logo",width:"60px"})}),Object(T.jsx)(V.a,{item:!0,flexGrow:"1",children:Object(T.jsx)(pe.a,{padding:".5rem 0",children:Object(T.jsx)(Z.a,{onChange:function(e){return l(e.target.value)},value:o,multiline:!0,rows:"2",disableUnderline:!0,type:"text",placeholder:"Post your comment",sx:{width:"100%"}})})})]})})})]})}var pt=n(75);function ht(){var e=Object(b.a)(),t=Object(v.h)().id,n=Object(m.b)(),r=Object(m.c)((function(e){return e.auth})),s=r.profile,i=r.status,o=c.a.useState(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],x=Object(m.c)((function(e){return e.follow})),p=x.followingStatus,h=x.followerStatus,f=x.followers,w=x.followings,k=JSON.parse(localStorage.getItem("login"))._id;Object(a.useEffect)((function(){n(z(t))}),[n,t]),Object(a.useEffect)((function(){s.userId&&(n(Fe(s.userId._id)),n(We(s.userId._id)))}),[n,s.userId]);var I=function(){var e=Object(S.a)(y.a.mark((function e(){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze({userId:s.userId._id,followerId:k});case 2:return r=e.sent,e.next=5,_e({followingId:s.userId._id,userId:k});case 5:a=e.sent,r&&n(Fe(t)),a&&n(We(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(S.a)(y.a.mark((function e(){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re({id:k,userId:s.userId._id});case 2:return r=e.sent,e.next=5,De({id:s.userId._id,userId:k});case 5:a=e.sent,r&&n(Fe(t)),a&&n(We(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function _(){if(s.userId)return k===s.userId._id}function R(){if(f)return-1===f.findIndex((function(e){return e.followerId===k}))}return Object(T.jsxs)(pe.a,{children:[Object(T.jsx)(pe.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(T.jsxs)(V.a,{container:!0,alignItems:"center",children:[Object(T.jsx)(V.a,{item:!0,sx:{mr:"10px"},children:Object(T.jsx)(ie.b,{to:"/",children:Object(T.jsx)(Q.a,{children:Object(T.jsx)(He.a,{})})})}),"success"===i&&Object(T.jsxs)(V.a,{item:!0,children:[Object(T.jsx)(U.a,{variant:"h6",children:s.userId&&s.userId&&s.userId.name}),Object(T.jsxs)(U.a,{sx:{fontSize:"12px",color:"#555"},children:[s.posts&&s.posts.length," posts"]})," "]})]})}),Object(T.jsx)(pe.a,{textAlign:"center",children:"loading"===i&&Object(T.jsx)(pe.a,{marginTop:"1rem",children:Object(T.jsx)(g.a,{size:20,color:"primary"})})}),"success"===i&&Object(T.jsxs)(pe.a,{height:"90vh",sx:{overflowY:"scroll"},children:[Object(T.jsxs)(pe.a,{position:"relative",children:[Object(T.jsx)("img",{width:"100%",src:s.backgroundImageUrl,alt:"background"}),Object(T.jsx)(pe.a,{sx:{position:"absolute",top:120,left:15,background:"#eee",borderRadius:"50%"},children:Object(T.jsx)("img",{width:"150px",src:s.profileImageUrl,alt:"profile"})})]}),Object(T.jsxs)(pe.a,{textAlign:"right",padding:"10px 20px",children:[Object(T.jsx)(Q.a,{onClick:function(){j(!0)},children:Object(T.jsx)(qe.a,{})}),Object(T.jsx)(Q.a,{children:Object(T.jsx)(Ke.a,{})}),!_()&&R()&&Object(T.jsx)(O.a,{onClick:I,size:"small",sx:{borderRadius:e.shape.borderRadius,textTransform:"capitalize",padding:"6px 20px",background:"black","&:hover":{background:"#333"}},variant:"contained",children:"Follow"}),!_()&&!R()&&Object(T.jsx)(O.a,{onClick:C,size:"small",sx:{borderRadius:e.shape.borderRadius,textTransform:"capitalize",padding:"6px 20px",background:"black","&:hover":{background:"#333"}},variant:"contained",children:"Unfollow"})]}),Object(T.jsxs)(pe.a,{padding:"10px 20px",children:[Object(T.jsx)(U.a,{variant:"h6",sx:{fontWeight:"500"},children:s.userId&&s.userId.name}),Object(T.jsxs)(U.a,{sx:{fontSize:"14px",color:"#555"},children:["@",s.userId&&s.userId.handle]}),Object(T.jsx)(U.a,{fontSize:"16px",color:"#333",padding:"10px 0",children:s.bio}),Object(T.jsxs)(pe.a,{display:"flex",alignItems:"center",padding:"6px 0",flexWrap:"wrap",children:[Object(T.jsxs)(pe.a,{display:"flex",children:[Object(T.jsx)(Ze.a,{htmlColor:"#555"}),Object(T.jsx)(U.a,{sx:{ml:"6px",color:"#555"},children:s.location})]}),Object(T.jsxs)(pe.a,{display:"flex",marginLeft:"1rem",children:[Object(T.jsx)(et.a,{htmlColor:"#555"}),Object(T.jsx)(F.a,{sx:{textDecoration:"none",marginLeft:"6px"},href:s.website||"https:/wasifbaliyan.com",children:s.website?s.website:"www"})]}),Object(T.jsxs)(pe.a,{display:"flex",marginLeft:"1rem",children:[Object(T.jsx)(nt.a,{htmlColor:"#555"}),Object(T.jsx)(U.a,{sx:{ml:"6px",color:"#555"},children:s.userId&&s.userId&&s.userId.createdAt&&Object(pt.a)(new Date(s.userId.createdAt),"MMM dd yyyy")})]})]}),Object(T.jsxs)(pe.a,{display:"flex",children:[Object(T.jsxs)(U.a,{color:"#555",marginRight:"1rem",children:[Object(T.jsx)("strong",{style:{color:"black"},children:"success"===p&&w.length}),"Following"]}),Object(T.jsxs)(U.a,{color:"#555",marginRight:"1rem",children:[Object(T.jsx)("strong",{style:{color:"black"},children:"success"===h&&f.length}),"Followers"]})]})]}),Object(T.jsx)(pe.a,{borderBottom:"1px solid #ccc",children:Object(T.jsx)(U.a,{display:"inline-block",variant:"caption",fontSize:"16px",marginX:"1rem",padding:"6px 0",fontWeight:"500",borderBottom:"4px solid ".concat(e.palette.primary.main),children:"Posts"})}),s.posts&&s.posts.map((function(e){return Object(T.jsx)(bt,{post:e,profile:!0},e._id)}))]}),d&&Object(T.jsx)(he,{open:d,handleClose:function(){j(!1)},saveText:"Save edits",children:Object(T.jsx)(pe.a,{children:Object(T.jsxs)(V.a,{container:!0,children:[Object(T.jsxs)(V.a,{item:!0,xs:12,children:[Object(T.jsx)(U.a,{children:"Edit Profile Image"}),Object(T.jsx)("img",{src:s.profileImageUrl,alt:"profileimage",style:{maxHeight:"100%",maxWidth:"100%"}}),Object(T.jsx)("br",{}),Object(T.jsxs)(O.a,{variant:"text",children:[Object(T.jsx)(Qe.a,{})," Edit"]})]}),Object(T.jsxs)(V.a,{item:!0,xs:12,children:[Object(T.jsx)(U.a,{children:"Edit Cover Image"}),Object(T.jsx)("img",{src:s.backgroundImageUrl,alt:"coverimage",style:{maxHeight:"100%",maxWidth:"100%"}}),Object(T.jsx)("br",{}),Object(T.jsxs)(O.a,{variant:"text",children:[Object(T.jsx)(Qe.a,{})," Edit"]})]}),Object(T.jsx)(V.a,{item:!0,xs:12,flexGrow:"1",children:Object(T.jsxs)(pe.a,{padding:".5rem 0",children:[Object(T.jsx)(U.a,{children:"Edit Bio"}),Object(T.jsx)(X.a,{label:"Edit Bio",style:{width:"100%",height:"20vh"},color:"primary",value:s.bio})]})})]})})})]})}var ft=n(148),Ot=["path"];function gt(e){var t=e.path,n=Object(ft.a)(e,Ot);return Object(m.c)((function(e){return e.auth})).isLoggedIn?Object(T.jsx)(v.b,Object(h.a)({path:t},n)):Object(T.jsx)(v.a,{to:"/login"})}var mt=n(103),vt=n.n(mt);function wt(){var e=Object(m.b)(),t=Object(be.a)(),n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],s=r[1],i=function(){var t=Object(S.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se({text:c});case 2:t.sent&&(e(Oe()),s(""));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(T.jsx)(pe.a,{padding:"1rem 1rem 0 1rem",borderBottom:"1px solid #ccc",children:Object(T.jsxs)(V.a,{container:!0,children:[Object(T.jsx)(V.a,{item:!0,sx:{paddingRight:"1rem"},children:Object(T.jsx)("img",{src:"/logo.png",alt:"lgogo",width:"50px"})}),Object(T.jsxs)(V.a,{item:!0,flexGrow:"1",children:[Object(T.jsx)(pe.a,{padding:".5rem 0",children:Object(T.jsx)(Z.a,{value:c,onChange:function(e){return s(e.target.value)},multiline:!0,rows:"2",disableUnderline:!0,type:"text",placeholder:"What's happening?",sx:{width:"100%"}})}),Object(T.jsx)(pe.a,{textAlign:"right",paddingBottom:".5rem",paddingTop:".5rem",borderTop:"1px solid #ccc",children:Object(T.jsx)(O.a,{onClick:i,disabled:0===c.trimStart().length,variant:"contained",color:"primary",sx:{borderRadius:t.shape.borderRadius,fontSize:"12px"},children:"Post"})})]})]})})}var yt,St=function(e){var t=Object(m.b)(),n=Object(a.useState)(1),r=Object(u.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(a.useRef)(null),x=Object(a.useCallback)(function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(u.a)(t,1),r=n[0],console.log(r.isIntersecting),r.isIntersecting&&(console.log("INTERSECTING....."),s((function(e){return e+1})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(a.useEffect)((function(){var e=new IntersectionObserver(x,{root:null,rootMargin:"0px",threshold:1});j.current&&e.observe(j.current)}),[x]);var b=Object(a.useCallback)(Object(S.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(!0),n.next=4,new Promise((function(e){return setTimeout(e,2e3)}));case 4:t(e(c)),d(!1),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])}))),[c,e,t]);return Object(a.useEffect)((function(){b()}),[b]),{loading:l,loadMoreRef:j}};function kt(){var e=Object(m.c)((function(e){return e.post})),t=e.status,n=e.posts,r=St(Oe),c=r.loading,s=r.loadMoreRef,i=Object(a.useMemo)((function(){return n.map((function(e){return Object(T.jsx)(bt,{post:e},e._id.toString())}))}),[n]);return Object(T.jsxs)(pe.a,{children:[Object(T.jsx)(pe.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(T.jsxs)(V.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)(U.a,{variant:"h6",children:"Home"})}),Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)(Q.a,{children:Object(T.jsx)(vt.a,{})})})]})}),Object(T.jsxs)(pe.a,{height:"92vh",sx:{overflowY:"scroll"},children:[Object(T.jsx)(wt,{}),Object(T.jsx)(pe.a,{textAlign:"center",marginTop:"1rem",children:"loading"===t&&Object(T.jsx)(g.a,{size:20,color:"primary"})}),i,Object(T.jsx)("div",{style:{height:"50px",width:"100px",backgroundColor:"red"},ref:s,children:c&&Object(T.jsx)("p",{children:"loading..."})})]})]})}function It(e){var t=e.comment;return Object(T.jsx)(pe.a,{padding:"1rem",sx:{"&:hover":{backgroundColor:"#eee"}},children:Object(T.jsxs)(V.a,{container:!0,flexWrap:"nowrap",children:[Object(T.jsx)(V.a,{item:!0,sx:{paddingRight:"1rem"},children:Object(T.jsx)("img",{src:"/logo.png",alt:"lgoog",width:"50px"})}),Object(T.jsx)(V.a,{item:!0,flexGrow:"1",children:Object(T.jsx)(pe.a,{children:Object(T.jsxs)(V.a,{container:!0,justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",children:[Object(T.jsxs)(V.a,{item:!0,children:[Object(T.jsxs)(pe.a,{display:"flex",children:[Object(T.jsx)(U.a,{sx:{fontSize:"16px",fontWeight:500,mr:"6px"},children:t.author.name}),Object(T.jsxs)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:["@",t.author.handle]}),Object(T.jsx)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:"."}),Object(T.jsxs)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:[Object(ct.a)(new Date(t.createdAt))," "]})]}),Object(T.jsx)(pe.a,{children:Object(T.jsx)(U.a,{sx:{fontSize:"15px",color:"#555"},children:t.text})})]}),Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)(Q.a,{children:Object(T.jsx)(qe.a,{})})})]})})})]})})}function Ct(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(b.a)(),i=Object(v.h)().id,o=Object(v.g)(),l=Object(m.b)(),d=Object(m.c)((function(e){return e.post})),j=d.status,x=d.comments,p=d.commentStatus,h=d.postDetails,f=c.a.useState(null),w=Object(u.a)(f,2),k=w[0],I=w[1],C=Boolean(k),z=JSON.parse(localStorage.getItem("login"))._id,_=function(){var e=Object(S.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({id:h._id});case 2:e.sent&&o.push("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(S.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Ie({id:h._id});case 3:e.sent&&(l(ge(i)),l(me(i)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){l(ge(i)),l(me(i))}),[l,i]);var D=function(){var e=Object(S.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke({id:i,text:n});case 2:e.sent&&(l(me(i)),r(""));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(pe.a,{children:[Object(T.jsx)(pe.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(T.jsxs)(V.a,{container:!0,alignItems:"center",children:[Object(T.jsx)(V.a,{item:!0,sx:{mr:"10px"},children:Object(T.jsx)(Q.a,{onClick:function(){return o.push("/")},children:Object(T.jsx)(He.a,{})})}),Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)(U.a,{variant:"h6",children:"Post"})})]})}),Object(T.jsxs)(pe.a,{height:"92vh",sx:{overflowY:"scroll"},children:[Object(T.jsx)(pe.a,{textAlign:"center",marginTop:"1rem",children:"loading"===j&&Object(T.jsx)(g.a,{size:20,color:"primary"})}),"success"===j&&Object(T.jsxs)(pe.a,{padding:"0 20px",children:[Object(T.jsx)(pe.a,{children:Object(T.jsxs)(V.a,{container:!0,alignItems:"center",children:[""!==(null===h||void 0===h?void 0:h.imageUrl)&&Object(T.jsx)(V.a,{item:!0,flexGrow:"1",children:Object(T.jsx)("img",{src:null===h||void 0===h?void 0:h.imageUrl,alt:"r",style:{maxHeight:"100%",maxWidth:"100%"}})}),Object(T.jsx)(V.a,{item:!0,flexGrow:"1",children:Object(T.jsxs)(V.a,{container:!0,justifyContent:"flex-start",children:[Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)("img",{src:"/logo.png",alt:"lgogo",width:"60px"})}),Object(T.jsxs)(V.a,{item:!0,children:[Object(T.jsx)(U.a,{sx:{fontSize:"16px",fontWeight:"500"},children:(null===h||void 0===h?void 0:h.author)&&(null===h||void 0===h?void 0:h.author.name)}),Object(T.jsxs)(U.a,{sx:{fontSize:"15px",color:"#555"},children:["@",(null===h||void 0===h?void 0:h.author)&&(null===h||void 0===h?void 0:h.author.handle)]})]}),Object(T.jsxs)(V.a,{item:!0,children:["success"===j&&(null===h||void 0===h?void 0:h.author)&&z===(null===h||void 0===h?void 0:h.author._id)&&Object(T.jsx)(Q.a,{"aria-expanded":C?"true":void 0,onClick:function(e){e.preventDefault(),I(e.currentTarget)},children:Object(T.jsx)(qe.a,{})}),Object(T.jsx)(rt.a,{id:"basic-menu",anchorEl:k,open:C,onClose:function(){I(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(T.jsx)(at.a,{onClick:function(e){e.preventDefault(),_()},children:"Delete Post"})})]})]})})]})}),Object(T.jsx)(pe.a,{children:Object(T.jsx)(U.a,{sx:{fontSize:"20px"},children:null===h||void 0===h?void 0:h.text})}),Object(T.jsxs)(pe.a,{display:"flex",padding:"1rem 0",borderBottom:"1px solid #ccc",children:[Object(T.jsx)(U.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:h&&(null===h||void 0===h?void 0:h.createdAt)&&Object(pt.a)(new Date(null===h||void 0===h?void 0:h.createdAt),"HH:mm a")}),Object(T.jsx)(U.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:"."}),Object(T.jsx)(U.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:h&&(null===h||void 0===h?void 0:h.createdAt)&&Object(pt.a)(new Date(null===h||void 0===h?void 0:h.createdAt),"MMM dd yyyy")})]}),Object(T.jsx)(pe.a,{display:"flex",padding:"1rem 0",borderBottom:"1px solid #ccc",children:Object(T.jsxs)(U.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:[Object(T.jsx)("strong",{children:(null===h||void 0===h?void 0:h.likes)&&(null===h||void 0===h?void 0:h.likes.length)})," ","Likes"]})}),Object(T.jsxs)(pe.a,{display:"flex",justifyContent:"space-around",padding:".5rem 0",borderBottom:"1px solid #ccc",children:[Object(T.jsx)(Q.a,{size:"small",children:Object(T.jsx)(ne.a,{fontSize:"small"})}),Object(T.jsx)(Q.a,{size:"small",children:Object(T.jsx)(it.a,{fontSize:"small"})}),Object(T.jsx)(Q.a,{onClick:R,size:"small",children:(null===h||void 0===h?void 0:h.isLiked)?Object(T.jsx)(jt.a,{fontSize:"small"}):Object(T.jsx)(lt.a,{fontSize:"small"})}),Object(T.jsx)(Q.a,{size:"small",children:Object(T.jsx)(xt.a,{fontSize:"small"})})]}),Object(T.jsxs)(pe.a,{children:[Object(T.jsxs)(V.a,{container:!0,children:[Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)("img",{src:"/logo.png",alt:"logo",width:"60px"})}),Object(T.jsxs)(V.a,{item:!0,flexGrow:"1",children:[Object(T.jsx)(pe.a,{padding:".5rem 0",children:Object(T.jsx)(Z.a,{onChange:function(e){return r(e.target.value)},value:n,multiline:!0,rows:"2",disableUnderline:!0,type:"text",placeholder:"Post your comment",sx:{width:"100%"}})}),Object(T.jsx)(pe.a,{textAlign:"right",paddingBottom:".5rem",children:Object(T.jsx)(O.a,{disabled:0===n.length,onClick:D,variant:"contained",color:"primary",size:"small",sx:{borderRadius:s.shape.borderRadius,fontSize:"12px"},children:"Comment"})})]})]}),Object(T.jsx)(pe.a,{textAlign:"center",marginTop:"1rem",children:"loading"===p&&Object(T.jsx)(g.a,{size:20,color:"primary"})}),"success"===p&&x.map((function(e){return Object(T.jsx)(It,{comment:e},e._id)}))]})]})]})]})}var zt=Object(k.b)("message/getAllMessages",Object(S.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/message/all");case 2:return t=e.sent,n=t.data,console.log(n,"FF"),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))),_t=Object(k.b)("message/getMessagesOf",function(){var e=Object(S.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/message/ofuser/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Rt=Object(k.c)({name:"message",initialState:{status:"idle",messages:[],messageDetails:{}},reducers:{},extraReducers:(yt={},Object(p.a)(yt,zt.pending,(function(e,t){e.status="loading"})),Object(p.a)(yt,zt.fulfilled,(function(e,t){e.status="success",e.messages=t.payload.response.response})),Object(p.a)(yt,zt.rejected,(function(e,t){e.status="failed"})),Object(p.a)(yt,_t.pending,(function(e,t){e.status="loading"})),Object(p.a)(yt,_t.fulfilled,(function(e,t){e.status="success",e.messageDetails=t.payload.response.messages})),Object(p.a)(yt,_t.rejected,(function(e,t){e.status="failed"})),yt)}).reducer;function Dt(e){e.message_id;var t=e.message;return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(ie.b,{to:"/messages/".concat(t.userdetails.id),style:{textDecoration:"none",color:"inherit"},children:Object(T.jsx)(pe.a,{padding:"1rem",sx:{"&:hover":{backgroundColor:"#eee"}},children:Object(T.jsxs)(V.a,{container:!0,flexWrap:"nowrap",children:[Object(T.jsx)(V.a,{item:!0,sx:{paddingRight:"1rem"},children:Object(T.jsx)(ie.b,{to:"/profile/".concat(t.userdetails.id),children:Object(T.jsx)("img",{src:"/logo.png",alt:"lgoog",width:"50px"})})}),Object(T.jsx)(V.a,{item:!0,flexGrow:"1",children:Object(T.jsx)(pe.a,{children:Object(T.jsx)(V.a,{container:!0,justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",children:Object(T.jsxs)(V.a,{item:!0,children:[Object(T.jsxs)(pe.a,{display:"flex",children:[Object(T.jsx)(U.a,{sx:{fontSize:"16px",fontWeight:500,mr:"6px"},children:t.userdetails.name}),Object(T.jsxs)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:["@",t.userdetails.handle]}),Object(T.jsx)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:"."}),Object(T.jsx)(U.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:Object(ct.a)(new Date(t.last_senton))})]}),Object(T.jsx)(pe.a,{children:Object(T.jsx)(U.a,{sx:{fontSize:"15px",color:"#555"},children:t.last_text})})]})})})})]})})})})}function Lt(){var e=Object(m.b)();Object(a.useEffect)((function(){e(zt())}),[e]);var t=Object(m.c)((function(e){return e.message})),n=t.status,r=t.messages;return Object(T.jsxs)(pe.a,{children:[Object(T.jsx)(pe.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(T.jsx)(V.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:Object(T.jsx)(V.a,{item:!0,children:Object(T.jsx)(U.a,{variant:"h6",children:"Messages"})})})}),Object(T.jsxs)(pe.a,{height:"92vh",sx:{overflowY:"scroll"},children:[Object(T.jsx)(pe.a,{textAlign:"center",marginTop:"1rem",children:"loading"===n&&Object(T.jsx)(g.a,{size:20,color:"primary"})}),"success"===n&&r.map((function(e){return Object(T.jsx)(Dt,{message:e},e.message_id)}))]})]})}var Et=n(265),At=n(258),Tt=n(146),Pt=n.n(Tt),Wt=n(145),Ft=n.n(Wt),Ut=n(144),Bt=new(n.n(Ut).a)("7e4c08f6b6f630769b3c",{cluster:"ap2",encrypted:!0});function Mt(){var e=Object(v.h)().id,t=Object(m.b)(),n=Object(m.c)((function(e){return e.auth})).user;Object(a.useEffect)((function(){Bt.subscribe(n._id.toString()).bind("message",(function(n){console.log(n),t(_t(e))}))}),[]),Object(a.useEffect)((function(){t(_t(e))}),[t,e]);var r=Object(m.c)((function(e){return e.message})),c=(r.status,r.messages),s=r.messageDetails,i=Object(a.useState)(""),o=Object(u.a)(i,2),l=o[0],d=o[1],j=function(){var n=Object(S.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Le({relativeUserId:x.id,messageText:l});case 2:n.sent&&(t(_t(e)),d(""));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),x=c?c.find((function(t){return t.userdetails.id===e})).userdetails:null;return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(pe.a,{children:[Object(T.jsx)(pe.a,{borderBottom:"1px solid #ccc",sx:{height:"10vh"},children:Object(T.jsx)(V.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:Object(T.jsx)(V.a,{item:!0,children:Object(T.jsxs)("span",{children:[Object(T.jsx)(ee.a,{fontSize:"large",color:"action"}),Object(T.jsx)(U.a,{variant:"h6",children:x.name})]})})})}),Object(T.jsx)(pe.a,{sx:{overflowY:"scroll",height:"80vh"},children:Object(T.jsx)(J.a,{sx:{width:"100%"},children:Array.isArray(s)&&s.map((function(e){return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(N.a,{children:[Object(T.jsx)(Et.a,{children:Object(T.jsx)(At.a,{children:Object(T.jsx)(ee.a,{})})}),n._id!==e.relativeUserId._id?Object(T.jsx)(H.a,{primary:"you",secondary:e.messageText}):Object(T.jsx)(H.a,{primary:Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(U.a,{style:{color:"#0073b1"},children:Object(T.jsx)("strong",{children:e.relativeUserId.name})})}),secondary:e.messageText}),Object(T.jsxs)("span",{style:{color:"grey",fontSize:"10px"},children:[Object(ct.a)(new Date(e.createdAt))," ago"]})]},e._id)})}))})}),Object(T.jsx)(pe.a,{sx:{position:"relative",bottom:"0",width:"100%",height:"10vh"},children:Object(T.jsx)(Z.a,{style:{backgroundColor:"#EEEEEE",position:"absolute",top:"50%",transform:"translateY(-50%)",padding:"2px"},value:l,onChange:function(e){return d(e.target.value)},type:"text",inputProps:{style:{padding:"10px"}},disableUnderline:!0,fullWidth:!0,placeholder:"Type message....",startAdornment:Object(T.jsx)(Ft.a,{sx:{paddingLeft:"20px",color:"#777"}}),endAdornment:Object(T.jsx)(Q.a,{sx:{paddingRight:"20px"},onClick:j,children:Object(T.jsx)(Pt.a,{sx:{color:"#777"}})})})})]})})}var Jt=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.auth})).isLoggedIn;return Object(a.useEffect)((function(){if("login"in localStorage){var e=JSON.parse(localStorage.getItem("login"));l.a.defaults.headers.common.authorization="Bearer ".concat(e.token)}}),[t]),Object(a.useEffect)((function(){var t=(JSON.parse(localStorage.getItem("login"))||{}).isLoggedIn;t&&e(E({isLoggedIn:t}))}),[e,t]),Object(T.jsxs)(v.d,{children:[Object(T.jsx)(gt,{exact:!0,path:"/profile/:id",children:Object(T.jsx)(Ne,{children:Object(T.jsx)(ht,{})})}),Object(T.jsx)(gt,{exact:!0,path:"/posts/:id",children:Object(T.jsx)(Ne,{children:Object(T.jsx)(Ct,{})})}),Object(T.jsx)(gt,{exact:!0,path:"/",children:Object(T.jsx)(Ne,{children:Object(T.jsx)(kt,{})})}),Object(T.jsx)(gt,{exact:!0,path:"/messages",children:Object(T.jsx)(Ne,{children:Object(T.jsx)(Lt,{})})}),Object(T.jsx)(gt,{exact:!0,path:"/messages/:id",children:Object(T.jsx)(Ne,{children:Object(T.jsx)(Mt,{})})}),Object(T.jsx)(v.b,{path:"/login",children:Object(T.jsx)(B,{})})]})},Nt=Object(k.a)({reducer:{auth:D,post:we,follow:Ue,message:Rt}}),Gt=Object(d.a)({});l.a.defaults.baseURL="https://sheltered-brushlands-40271.herokuapp.com",i.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(m.a,{store:Nt,children:Object(T.jsx)(ie.a,{children:Object(T.jsx)(j.a,{theme:Gt,children:Object(T.jsx)(Jt,{})})})})}),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.a59c7d63.chunk.js.map